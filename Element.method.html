<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
   <title>Element.toGeo()</title>
   <style type="text/css">
   </style>
   <script src="http://www.google.com/jsapi?key=ABQIAAAA1XbMiDxx_BTCY2_FkPh06RRaGTYH6UMl8mADNa0YKuWNNa8VNxQEerTAUcfkyrr6OwBovxn7TDAH5Q"></script>
   <script type="text/javascript">google.load("mootools", "1.3.0");</script>
   <script type="text/javascript" src="MooGeo.js"></script>
</head>
<body>

<div id="tweet">Currently I am on a working trip in Sunnyvale. I came via San Francisco and I need to go to San Jose  later on to return the broken rental car. I will probably check visit the Facebook guys in Palo Alto  afterwards.</div>

<script type="text/javascript">

(function(){

     var fn = function(){
          var text = this.get('text');
          var elem = this;
          new MooGeo(text,{
              onComplete: function(o){
                   var ob = o.place;
                   if(ob) {
                       var n = ob.length;
                       if(n>0) {
                           for(var i=0;i<n;i++){
                                var found = o.place[i].name;
                                    text = text.replace(found,'<a href="http://maps.google.com/maps?q='+o.place[i].country.content+','+found+'">'+found+'</a>');
                           }//endfor                           
                       }//endif
                   }//endob 
                   elem.set('html',text);
              } 
          });
        return this; 
     }; 

     Element.implement({
          toGeo: fn
     });

})();
 
$('tweet').toGeo();  

</script>

</body>
</html>

